\hypertarget{interface_s_s_y_login_items}{
\section{SSYLoginItems Class Reference}
\label{interface_s_s_y_login_items}\index{SSYLoginItems@{SSYLoginItems}}
}
A Cocoa wrapper around LSSharedFileList for adding or removing Login Items.  


{\tt \#import $<$SSYLoginItems.h$>$}

\subsection*{Static Public Member Functions}
\begin{CompactItemize}
\item 
(BOOL) + \hyperlink{interface_s_s_y_login_items_35acff53ae711a01cb5cc3a12eec873e}{isURL:loginItem:hidden:error:}
\begin{CompactList}\small\item\em Tests whether or not the file URL url is a Login Item for the current user. \item\end{CompactList}\item 
(BOOL) + \hyperlink{interface_s_s_y_login_items_3ca0388e94d4cc7a832d759bbe409abf}{addLoginURL:hidden:error:}
\begin{CompactList}\small\item\em Adds file URL url as a Login Item at the end of the list for the current user. \item\end{CompactList}\item 
(BOOL) + \hyperlink{interface_s_s_y_login_items_fa2d80dcbaff8a25f015f30c6c047511}{removeLoginURL:error:}
\begin{CompactList}\small\item\em Removes file URL url as a Login Item for the current user. \item\end{CompactList}\item 
(enum SSYSharedFileListResult) + \hyperlink{interface_s_s_y_login_items_db5b2e934748d084ab1cb002234d7ae5}{synchronizeLoginItemPath:shouldBeLoginItem:setHidden:error:}
\begin{CompactList}\small\item\em Adds {\em or\/} removes an item to/from Login Items of current user. \item\end{CompactList}\item 
(enum SSYSharedFileListResult) + \hyperlink{interface_s_s_y_login_items_34b0ac473f65eda0fe0ec94a6b4780b9}{removeAllLoginItemsWithName:thatAreNotInPath:error:}
\begin{CompactList}\small\item\em Removes all Login Items for the current user which have a given name as last component of their path name, except those in a given path. \item\end{CompactList}\end{CompactItemize}
\subsection*{Protected Attributes}
\begin{CompactItemize}
\item 
\hypertarget{interface_s_s_y_login_items_39c56f5be072bc19c87e7445baf67f96}{
\textbf{SSYSharedFileListResultFailed} = -1}
\label{interface_s_s_y_login_items_39c56f5be072bc19c87e7445baf67f96}

\item 
\hypertarget{interface_s_s_y_login_items_2cbc54aaff1faae8ec28ac9c79345e21}{
\textbf{SSYSharedFileListResultNoAction} = 0}
\label{interface_s_s_y_login_items_2cbc54aaff1faae8ec28ac9c79345e21}

\item 
\hypertarget{interface_s_s_y_login_items_5eb883a39ac348ddd3ec5098c92a37f3}{
\textbf{SSYSharedFileListResultAdded}}
\label{interface_s_s_y_login_items_5eb883a39ac348ddd3ec5098c92a37f3}

\item 
\hypertarget{interface_s_s_y_login_items_78878663a6f7bcda81234a3caa3054da}{
\textbf{SSYSharedFileListResultRemoved}}
\label{interface_s_s_y_login_items_78878663a6f7bcda81234a3caa3054da}

\item 
\hypertarget{interface_s_s_y_login_items_e49a173c997eb79190acb726b2aa2d02}{
\textbf{SSYSharedFileListResultLaunched}}
\label{interface_s_s_y_login_items_e49a173c997eb79190acb726b2aa2d02}

\item 
\hypertarget{interface_s_s_y_login_items_8c429c7549e17260c2c1c3c010c244a5}{
\textbf{SSYSharedFileListResultQuit}}
\label{interface_s_s_y_login_items_8c429c7549e17260c2c1c3c010c244a5}

\item 
\hypertarget{interface_s_s_y_login_items_dd5d4a166ac53c72fbba3613d4b86e22}{
\textbf{SSYSharedFileListResultSucceeded}}
\label{interface_s_s_y_login_items_dd5d4a166ac53c72fbba3613d4b86e22}

\end{CompactItemize}


\subsection{Detailed Description}
A Cocoa wrapper around LSSharedFileList for adding or removing Login Items. 

\hyperlink{_s_s_y_login_items_8h-source}{SSYLoginItems.h}/.c is an Obj-C wrapper on LSSharedFileList which provides some class methods to query, add and remove items from the user's \char`\"{}Login Items\char`\"{} in System Preferences.

SSLoginItems.h/.c may be used in other projects. Mac OS 10.5 and the CoreServices framework are required.

QUICK START

Run the demo project and follow the instructions in the console. It will examine, add and remove items from your Login Items. It will ask \hyperlink{interfaceyou}{you} to verify the results by examining your Login Items and then pressing return six times.

BUGS

When I run the program, I find two repeatable bugs: • In Test 1, Login Items that have the \char`\"{}Hidden\char`\"{} box checked are reported to have hidden=0. • In test 5, when the tool sets a Login Item with hidden=1, the \char`\"{}Hidden\char`\"{} box in Login Items does not get checked.

I believe this is due to a bug in the LSShardFileList API which I have entered into Apple Bug Reporter. Problem ID 5901742

30-Apr-2008 01:48 PM Jerry Krinock:

SUMMARY The 'hidden' attribute for Login Items in the LSSharedList API has a disconnect with the reality. In more detail, when reading a Login Item, the 'hidden' attribute is read as 0, even if it is in fact '1', unless the 'hidden' attribute has been set by the LSSharedList API. In that case, it doesn't really set, but when \hyperlink{interfaceyou}{you} read it back with the API, it says that it is set, even though in fact it is not.

STEPS TO REPRODUCE Build and run the attached project. Follow the prompts shown in the the console.

EXPECTED RESULTS In all tests, the values read and written using the LSSharedList API and shown in the log should agree with what is shown in the System Preferences application.

ACTUAL RESULTS In Test \#1, items which have the \char`\"{}Hide\char`\"{} box checked in System Preferences read from the API hidden=0. In Test \#5, although the API set Safari to \char`\"{}Hide\char`\"{} and the API read it back as hidden=1, if \hyperlink{interfaceyou}{you} look in System Preferences \hyperlink{interfaceyou}{you} see that the \char`\"{}Hide\char`\"{} box is not checked. 

\subsection{Member Function Documentation}
\hypertarget{interface_s_s_y_login_items_3ca0388e94d4cc7a832d759bbe409abf}{
\index{SSYLoginItems@{SSYLoginItems}!addLoginURL:hidden:error:@{addLoginURL:hidden:error:}}
\index{addLoginURL:hidden:error:@{addLoginURL:hidden:error:}!SSYLoginItems@{SSYLoginItems}}
\subsubsection[{addLoginURL:hidden:error:}]{\setlength{\rightskip}{0pt plus 5cm}+ (BOOL) addLoginURL: (NSURL$\ast$) {\em url}\/ hidden: (NSNumber$\ast$) {\em hidden}\/ error: (NSError$\ast$$\ast$) {\em error\_\-p}}}
\label{interface_s_s_y_login_items_3ca0388e94d4cc7a832d759bbe409abf}


Adds file URL url as a Login Item at the end of the list for the current user. 

Also, sets its 'hidden' parameter according to \mbox{[}hidden boolValue\mbox{]} \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em url}]The file url of the item to be added. \item[{\em hidden}]The \char`\"{}Hidden\char`\"{} attribute of the new login item will be set to reflect this input. \item[{\em error\_\-p}]On output, if input is not NULL, if error occurred, will point to an NSError$\ast$ expressing the error which occurred. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]YES if operation was successful with no error, NO otherwise. \end{Desc}
\hypertarget{interface_s_s_y_login_items_35acff53ae711a01cb5cc3a12eec873e}{
\index{SSYLoginItems@{SSYLoginItems}!isURL:loginItem:hidden:error:@{isURL:loginItem:hidden:error:}}
\index{isURL:loginItem:hidden:error:@{isURL:loginItem:hidden:error:}!SSYLoginItems@{SSYLoginItems}}
\subsubsection[{isURL:loginItem:hidden:error:}]{\setlength{\rightskip}{0pt plus 5cm}+ (BOOL) isURL: (NSURL$\ast$) {\em url}\/ loginItem: (NSNumber$\ast$$\ast$) {\em isLoginItem\_\-p}\/ hidden: (NSNumber$\ast$$\ast$) {\em hidden\_\-p}\/ error: (NSError$\ast$$\ast$) {\em error\_\-p}}}
\label{interface_s_s_y_login_items_35acff53ae711a01cb5cc3a12eec873e}


Tests whether or not the file URL url is a Login Item for the current user. 

Returns answer as \mbox{[}$\ast$isLoginItem\_\-p boolValue\mbox{]}. If it is, also returns whether or not it is hidden as \mbox{[}$\ast$hidden\_\-p boolValue\mbox{]} \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em url}]The file url of the item in question \item[{\em isLoginItem\_\-p}]On output, if input is not NULL, will point to an \mbox{[}NSNumber numberWithBool:\mbox{]} expressing whether or not the item in question is a Login Item for the current user. \item[{\em hidden\_\-p}]On output, if input is not NULL, will point to an \mbox{[}NSNumber numberWithBool:\mbox{]} expressing whether or not the item in question is \char`\"{}Hidden\char`\"{} in Login Items \item[{\em error\_\-p}]On output, if input is not NULL, if error occurred, will point to an NSError$\ast$ expressing the error which occurred. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]YES if operation was successful with no error, NO otherwise. \end{Desc}
\hypertarget{interface_s_s_y_login_items_34b0ac473f65eda0fe0ec94a6b4780b9}{
\index{SSYLoginItems@{SSYLoginItems}!removeAllLoginItemsWithName:thatAreNotInPath:error:@{removeAllLoginItemsWithName:thatAreNotInPath:error:}}
\index{removeAllLoginItemsWithName:thatAreNotInPath:error:@{removeAllLoginItemsWithName:thatAreNotInPath:error:}!SSYLoginItems@{SSYLoginItems}}
\subsubsection[{removeAllLoginItemsWithName:thatAreNotInPath:error:}]{\setlength{\rightskip}{0pt plus 5cm}+ (enum SSYSharedFileListResult) removeAllLoginItemsWithName: (NSString$\ast$) {\em name}\/ thatAreNotInPath: (NSString$\ast$) {\em path}\/ error: (NSError$\ast$$\ast$) {\em error\_\-p}}}
\label{interface_s_s_y_login_items_34b0ac473f65eda0fe0ec94a6b4780b9}


Removes all Login Items for the current user which have a given name as last component of their path name, except those in a given path. 

This method is useful to clear out login items referring to old versions, after the installation of a Login Item has been updated. In this case, pass path as the latest version of the app to be launched. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em name}]Filename (last component of path name) used to qualify Login Items for removal. The .extension part of this argument, if any, is ignored. \item[{\em path}]Login Items in this path will not be removed. \item[{\em error\_\-p}]On output, if input is not NULL, if error occurred, will point to an NSError$\ast$ expressing the error which occurred. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]If operation fails for some reason, returns SSYSharedFileListResultFailed If one or more Login Items were removed, returns SSYSharedFileListResultRemoved. If zero Login Items were removed, returns SSYSharedFileListResultNoAction. \end{Desc}
\hypertarget{interface_s_s_y_login_items_fa2d80dcbaff8a25f015f30c6c047511}{
\index{SSYLoginItems@{SSYLoginItems}!removeLoginURL:error:@{removeLoginURL:error:}}
\index{removeLoginURL:error:@{removeLoginURL:error:}!SSYLoginItems@{SSYLoginItems}}
\subsubsection[{removeLoginURL:error:}]{\setlength{\rightskip}{0pt plus 5cm}+ (BOOL) removeLoginURL: (NSURL$\ast$) {\em url}\/ error: (NSError$\ast$$\ast$) {\em error\_\-p}}}
\label{interface_s_s_y_login_items_fa2d80dcbaff8a25f015f30c6c047511}


Removes file URL url as a Login Item for the current user. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em url}]The file url of the item to be removed. \item[{\em error\_\-p}]On output, if input is not NULL, if error occurred, will point to an NSError$\ast$ expressing the error which occurred. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]YES if operation was successful with no error, NO otherwise. \end{Desc}
\hypertarget{interface_s_s_y_login_items_db5b2e934748d084ab1cb002234d7ae5}{
\index{SSYLoginItems@{SSYLoginItems}!synchronizeLoginItemPath:shouldBeLoginItem:setHidden:error:@{synchronizeLoginItemPath:shouldBeLoginItem:setHidden:error:}}
\index{synchronizeLoginItemPath:shouldBeLoginItem:setHidden:error:@{synchronizeLoginItemPath:shouldBeLoginItem:setHidden:error:}!SSYLoginItems@{SSYLoginItems}}
\subsubsection[{synchronizeLoginItemPath:shouldBeLoginItem:setHidden:error:}]{\setlength{\rightskip}{0pt plus 5cm}+ (enum SSYSharedFileListResult) synchronizeLoginItemPath: (NSString$\ast$) {\em path}\/ shouldBeLoginItem: (BOOL) {\em shouldBeLoginItem}\/ setHidden: (BOOL) {\em setHidden}\/ error: (NSError$\ast$$\ast$) {\em error\_\-p}}}
\label{interface_s_s_y_login_items_db5b2e934748d084ab1cb002234d7ae5}


Adds {\em or\/} removes an item to/from Login Items of current user. 

If path is not a Login Item for the current user and shouldBeLoginItem is YES, makes it a Login Item for the current user and also sets it hidden or not according to setHidden. If path is a Login Item for the current user and shouldBeLoginItem is NO, removes path from current user's Login items. If neither of the above, does nothing. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em The}]absolute path to the item which will be added or removed from Login Items. \item[{\em shouldBeLoginItem}]Whether the item should be a Login Item or not. \item[{\em setHidden}]If a new login item is set, whether or not it is set as Hidden. \item[{\em error\_\-p}]On output, if input is not NULL, if error occurred, will point to an NSError$\ast$ expressing the error which occurred. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]If operation fails for some reason, returns SSYSharedFileListResultFailed If item at path was not found and added, returns SSYSharedFileListResultAdded. If item at path was found and removed, returns SSYSharedFileListResultRemoved. If none of the above occurred, returns SSYSharedFileListResultNoAction. \end{Desc}


The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
Documents/Programming/ClassesObjC/SSYLoginItems.h\item 
Documents/Programming/ClassesObjC/SSYLoginItems.m\end{CompactItemize}
